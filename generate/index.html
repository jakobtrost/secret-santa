<!DOCTYPE html>
	<head>
		<html lang="en">
		<meta charset="UTF-8">
		<title>Verschlüsselung | Wichtl Verlosung 2024</title>
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🎅🏻</text></svg>">

		<!-- CSS Stylesheets -->
		<link rel="stylesheet" href="https://unpkg.com/primitive-ui/dist/css/main.css" />
		<link rel="stylesheet" href="../style.css?v=1.0">
	</head>

	<body>
		<main class="container small-container">

			<div class="content-section">
				<h1>🎅🏻 Wichtl Verlosung 2024</h1>
				<h2>🔑 Verschlüsselung</h2>

				<div id="names">
					<!-- markup generated by JS -->
				</div>
			</div>

		</main>
	</body>

	<footer>

	</footer>
		
	<!-- JS Scripts -->
	<script src="../functions.js?v=1.0"></script>
	<script>

		// generate assignments
		let assignments = assignNames( people );
		count = 1;
		while ( ! checkAssignments( assignments ) ) {
			assignments = assignNames( people );
			count++;
		}

		// success!
		console.log( "Everything worked fine in " + count + " iterations: ", assignments );

		// encrypt
		const encryptedAssignments = encryptAssignments( assignments );

		// create table
		createTable( 'names', encryptedAssignments );
		console.log( "Encrypted assignments: ", encryptedAssignments );

		// download assignments as JSON file
		if ( confirm("Die Verschlüsselung wurde erfolgreich durchgeführt. Möchtest du die Zuordnungen als JSON-Datei herunterladen?") ) {
			const a = document.createElement('a');
			const file = new Blob([JSON.stringify(encryptedAssignments)], {type: 'application/json'});
			a.href = URL.createObjectURL(file);
			a.download = 'encryptedAssignments-2024.json';
			a.click();
		}

	</script>
</html>
